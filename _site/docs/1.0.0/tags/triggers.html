<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Triggers - page.support documentation</title> <link rel="shortcut icon" href="/documentation/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/documentation/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/documentation/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/documentation/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>Triggers | page.support documentation</title> <meta name="generator" content="Jekyll v3.9.0" /> <meta property="og:title" content="Triggers" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Page.support publisher and web client documentation." /> <meta property="og:description" content="Page.support publisher and web client documentation." /> <link rel="canonical" href="http://localhost:4000/documentation/docs/1.0.0/tags/triggers.html" /> <meta property="og:url" content="http://localhost:4000/documentation/docs/1.0.0/tags/triggers.html" /> <meta property="og:site_name" content="page.support documentation" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Triggers" /> <script type="application/ld+json"> {"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/documentation/assets/images/bolt-logo-white.png"}},"url":"http://localhost:4000/documentation/docs/1.0.0/tags/triggers.html","@type":"WebPage","headline":"Triggers","description":"Page.support publisher and web client documentation.","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="http://localhost:4000/documentation/" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="http://localhost:4000/documentation/" class="nav-list-link">Home</a></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/documentation/docs/1.0.0/" class="nav-list-link">Version 1.0.0</a><ul class="nav-list "><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/documentation/docs/1.0.0/tags" class="nav-list-link">Tags</a><ul class="nav-list"><li class="nav-list-item "> <a href="http://localhost:4000/documentation/docs/1.0.0/tags/query.html" class="nav-list-link">Query tags</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/documentation/docs/1.0.0/tags/phrasing.html" class="nav-list-link">Phrasing tags</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/documentation/docs/1.0.0/tags/sayReply.html" class="nav-list-link">Say and Reply tags</a> </li><li class="nav-list-item active"> <a href="http://localhost:4000/documentation/docs/1.0.0/tags/triggers.html" class="nav-list-link active">Triggers</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/documentation/docs/1.0.0/patterns" class="nav-list-link">Patterns</a><ul class="nav-list"><li class="nav-list-item "> <a href="http://localhost:4000/documentation/docs/1.0.0/patterns/diagnostics.html" class="nav-list-link">Diagnostics</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/documentation/docs/1.0.0/patterns/conditionalQuestions.html" class="nav-list-link">Conditional Questions</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/documentation/docs/1.0.0/patterns/answers.html" class="nav-list-link">Answers</a> </li></ul></li><li class="nav-list-item "><a href="http://localhost:4000/documentation/docs/1.0.0/customizing.html" class="nav-list-link">Customizing</a></li><li class="nav-list-item "><a href="http://localhost:4000/documentation/docs/1.0.0/markdown.html" class="nav-list-link">Markdown</a></li><li class="nav-list-item "><a href="http://localhost:4000/documentation/docs/1.0.0/errors.html" class="nav-list-link">Errors</a></li></ul></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search page.support documentation" aria-label="Search page.support documentation" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="http://localhost:4000/documentation/docs/1.0.0/">Version 1.0.0</a></li> <li class="breadcrumb-nav-list-item"><a href="http://localhost:4000/documentation/docs/1.0.0/tags">Tags</a></li> <li class="breadcrumb-nav-list-item"><span>Triggers</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h2 id="triggers"> <a href="#triggers" class="anchor-heading" aria-labelledby="triggers"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Triggers </h2> <p>Triggers define when a say/reply pair is executed by the bot. They let the bot adapt its behavior based on what the user has said in previous questions. This is a key advantage of bots over non interactive web pages. You can turn a text-heavy website that requires lots of reading into a conversation. Your users don’t like doing lots of reading, particularly on complex subjects, which is part of the reason they contact customer support. Let’s face it - most of a typical support or sales website isn’t relevant to the user’s specific problem. Triggers get the user to the content that will solve their specific problem. This is similar to what a human support representative or salesperson would do if they were talking to a user. Example use cases are</p> <ul> <li>recommending products to users by asking them about the problem they want to solve</li> <li>answering tech support questions that require diagnostics</li> <li>guiding users to resources like forms on your website</li> <li>directing users to the right support queue/contact for a given problem</li> </ul> <p>Lets continue through the Apple refund example and show how triggers are used. Earlier the bot asked the user what device they are on and stored the reply. Next we have to tell the bot which (device-specific) steps to walk the user through. Apple’s support page has one section for each device. If the user replied they are on an iPhone, we’d want the below section to be shown to the user:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;!-- say.trigger: same('device', [2])
     say.type: diagnostic
--&gt;
### How to see or cancel subscriptions on your iPhone, iPad, or iPod touch
0. Open the Settings app. 
1. Tap your name. 
3. Tap Subscriptions. (If you don't see "Subscriptions," tap "iTunes &amp; App Store" instead. Then tap your Apple ID, tap View Apple ID, sign in, scroll down to Subscriptions, and tap Subscriptions.)
4. Tap the subscription that you want to manage. Don't see the subscription that you're looking for?
5. Tap Cancel Subscription. If you don't see Cancel Subscription, the subscription is already canceled and won't renew.
</code></pre></div></div> <p>The <code class="language-plaintext highlighter-rouge">say.trigger:</code> key is followed by an expression. If that expression is true, the bot executes the current question. The bot will evaluate triggers in say tags from the top of the page downwards and run the first one that evaluates to true. After running a question once it won’t run it again. Every time the bot needs to determine which question to run next, it will evaluate all the not-yet-run triggers on the page from top to bottom. <strong>If you don’t specify a trigger value or leave out the say.trigger tag, the bot assumes you always want to run this question.</strong></p> <p>Triggers use formulas to test user’s past replies against some set of replies that should trigger this question. The <code class="language-plaintext highlighter-rouge">same('device', [2])</code> formula is telling the bot to walk the user through the ‘iPhone, iPad, or iPod’ section if the user replied to the ‘device’ question with the third value in the deviceType reply. Any reply used in a trigger must have been defined earlier in the same document or be a built-in reply. The numbers inside the brackets are zero based indexes into the reply associated with the question.</p> <p>There are three types of equality tests available, designed to handle both single-reply and multi-reply scenarios:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>same('device', [0])
subset('device', [0,1,7])
share('device', [1,2,4])
</code></pre></div></div> <p>The <code class="language-plaintext highlighter-rouge">same({say.name}, [ one or more comma separated reply indexes] )</code> formula will be true if <em>all</em> the user’s replies are the same as the reply indexes listed in brackets. The <code class="language-plaintext highlighter-rouge">subset({say.name}, [ one or more comma separated reply indexes] )</code> formula will be true if all of the user’s replies are contained in the listed indexes. For example, if the user replied with 0 and 1, the example would be true. If the user replied 0 and 3, it would be false. The <code class="language-plaintext highlighter-rouge">share({say.name}, [ one or more comma separated reply indexes] )</code> formula will be true if at least one index overlaps. For example if the user replied with 2 and 8, the example would return true. With all these formulas, the order of the indexes or the user replies is not important.</p> <p>But you’re not limited to these formulas. Trigger operators include ` ==, !=, &lt;=, &gt;=, &lt;, &gt;, in [value1, value2, ..]<code class="language-plaintext highlighter-rouge">. You can write multi-part expressions with 'and', 'or' as in </code>(device == reply(‘deviceType’, 2) and (subscription != reply(‘accountStatus’, 3))`. These are mostly useful when you’re accepting free form inputs from the user.</p> <p>To express “not in” use the format <code class="language-plaintext highlighter-rouge">not (device in reply('notAllowedDevices'))</code> surrounding the inner expression with parentheses. When using the <code class="language-plaintext highlighter-rouge">in</code> operator, the right hand side of the operator must be an list - either in the form of a function that returns a list, or list/array literal notation like <code class="language-plaintext highlighter-rouge">not (device in ['iOS', 'iPad'])</code>. The ‘in’ operator only works for testing if a single value is included in a set. For example, deviceType in the previous example must be a word or integer. Note that string comparisons are case sensitive.</p> <p>You can also apply the pre-defined functions <code class="language-plaintext highlighter-rouge">min(a,b,..), max(a,b,..), and random(n)</code> where n is a range from 0 to n.</p> <p>On the left or right side of an operator, you may use:</p> <ul> <li>An integer or floating point number.</li> <li>A word surrounded by single quotes like <code class="language-plaintext highlighter-rouge">'canceled'</code>. Not recommended but will work. Generally we recommend using the reply function explained below.</li> <li>An Array of words or integers like <code class="language-plaintext highlighter-rouge">[1, 7, 2234]</code>. Same caveats as with words.</li> <li> <p>A reply function which has two forms. The array form returns an array if you omit an index as in <code class="language-plaintext highlighter-rouge">reply('deviceType')</code> which might return <code class="language-plaintext highlighter-rouge">['iOS', 'Android']</code> or whatever your document defines it as. The single result form is <code class="language-plaintext highlighter-rouge">reply('deviceType', 1)</code> which represents the second reply inside the reply named ‘deviceType’. It returns <code class="language-plaintext highlighter-rouge">'Android'</code>. Built-in replies like ‘yes’ work the same way. We encourage you to create and use these reply functions instead of string literals since they let you change the replies in one place and use them in many places. Reply functions are automatically created whenever you list reply options in a tag using <code class="language-plaintext highlighter-rouge">[reply.values]</code>, give it a name and list of replies.</p> </li> <li>In a future release, we’ll let you define your own javascript function calls like <code class="language-plaintext highlighter-rouge">getOrderStatus(orderNumber)</code>. The function call is executed to retrieve or compute the value to be evaluated in the trigger. A use case is getting information from the user’s device or the server backend, aka personalization of the interaction. For instance if a user is asking for an update on the status of a product they ordered, they might say the order number. The function could make a https request to your server to get a list of recent orders and show their status. This also means that the user might get an error if the request fails, or there might be a significant delay before the system replies to the user.</li> </ul> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
